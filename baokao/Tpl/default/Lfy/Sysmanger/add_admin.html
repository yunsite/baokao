<include file="Public:header" />
<script type="text/javascript">
    $(function(){
        $('#admin_name').focus();

        $('#tijiao').click(function(){
            var admin_name=$('#admin_name').val();
            var admin_pwd=$('#admin_pwd').val();
            var admin_pwd1=$('#admin_pwd1').val();
            
            if(check(admin_name,admin_pwd,admin_pwd1)){
                $('#pop').load("{:U('sysmanger/save_add_admin')}",{
                    "admin_name":admin_name,
                    "admin_pwd":admin_pwd,
                });
                $('#admin_name').val('');
                $('#admin_pwd').val('');
                $('#admin_pwd1').val('');
            }
        });


        function jiance_chongming(){
            var admin_name=$('#admin_name').val();
            $.post("{:U('sysmanger/check_admin_name')}",{
                "admin_name":admin_name
            },function(data){chuli(data.status);},'json');
        }

        $('#admin_name').change(function(){
            jiance_chongming();
        });


        function chuli(status)
        {
            switch(status)
            {
                case 1:   //用户已经存在
                    $('#pop').html('<font color="red">管理员名称已经存在！请重新输入！</font>');
                    $('#admin_name').val('');
                    $('#admin_name').focus();
                    break;
                case 2:   //可以注册
                    $('#pop').html('<font color="red">恭喜！该用户名可以注册！！</font>');
                    $('#admin_pwd').focus();
                    break;
                default:
                    $('#pop').html('<font color="red">系统错误！请刷新网页后重新提交！</font>');
                    break;
            }
        }


        function check(admin_name,admin_pwd,admin_pwd1){
            if(admin_name==''){
                $('#pop').html('<font color="red">管理员名称不能为空！请填写管理员名称！</font>');
                $('#admin_name').focus();
                return false;
            }
            if(admin_pwd==''){
                $('#pop').html('<font color="red">管理密码不能为空！请填写管理员密码！</font>');
                $('#admin_pwd').focus();
                return false;
            }
            if(admin_pwd!=admin_pwd1){
                $('#pop').html('<font color="red">管理密码两次输入的不一致！请核对后重新输入！</font>');
                $('#admin_pwd').val('');
                $('#admin_pwd1').val('');
                $('#admin_pwd').focus();
                return false;
            }
            return true;
        }



       $('#pop').ajaxStart(function(){
           $('#pop').html('<font color="red">数据处理中...请稍后...</font>');
       });
    });
</script>
    <b>添加管理员：</b>
    <br>
    <a id="pop"></a>
    <br>
    管理员名称：<input type="text" name="admin_name" id="admin_name" value="" size="15" maxlength="10" />(最长10位)<br>
    管理员密码：<input type="password" name="admin_pwd" id="admin_pwd" value="" size="15" maxlength="20" />(最长20位)<br>
    确认密码：<input type="password" name="admin_pwd1" id="admin_pwd1" value="" size="15" maxlength="20" /><br>
    <br><br>
    <input type="button" value="确认添加" id="tijiao">
<include file="Public:ender" />
